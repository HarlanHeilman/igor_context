# Constraint Expressions

Chapter III-8 — Curve Fitting
III-228
Filling in a value in the Lower Constraint column causes the dialog to generate a command to constrain the cor-
responding coefficient to values greater than the value you enter. Filling in a value in the Upper Constraint 
column constrains the corresponding coefficient to values less than the value you enter. A box that is left empty 
does not generate any constraint.
The figure above was made with the gauss function chosen. The following commands are generated by the 
dialog:
More complicated constraints are possible, but cannot be entered in the Curve Fitting dialog. This requires 
that you make a constraints wave before you enter the dialog. Then choose the wave from the Constraints 
menu. See the following sections to learn how to construct the constraints wave.
Complex Constraints Using a Constraints Wave
You can constrain the values of linear combinations of coefficients, but the Curve Fitting dialog provides 
support only for simple constraints. You can construct an appropriate text wave with constraints before 
entering the Curve Fitting dialog. Select the wave from the Constraints menu in the Coefficients tab. You 
can also use the CurveFit or FuncFit commands on the command line with a constraints wave.
Each element of the text wave holds one constraint expression. Using a text wave makes it easy to edit the expres-
sions in a table. Otherwise, you must use a command line like the second line in the example shown above.
Constraint Expressions
Constraint expressions can be arbitrarily complex, and can involve any or all of the fit coefficients. Each 
expression must have an inequality symbol (“<”, “<=”, “>”, or “>=”). In the expressions the symbol Kn (K0, 
K1, etc.) is used to represent the nth fitting coefficient. This is like the Kn system variables, but they are 
merely symbolic place holders in constraint expressions. Expressions can involve sums of any combination 
of the Kn’s and factors that multiply or divide the Kn’s. Factors may be arbitrarily complex, even nonlinear, 
as long as they do not involve any of the Kn’s. The Kn’s cannot be used in a call to a function, and cannot 
be involved in a nonlinear expression. Here are some legal constraint expressions:
K0 > 5
K1+K2 < numVar^2+2
// numVar is a global numeric variable
K0/5 < 2*K1
(numVar+3)*K3 > K1+K2/(numVar-2)
log(numVar)*K3 > 5
// nonlinear factor doesn’t involve K3
These are not legal:
Make/O/T/N=2 T_Constraints
T_Constraints[0] = {"K2 > 40","K2 < 60"}
CurveFit gauss aa /D /C=T_Constraints
A Make command to make a text wave to 
contain constraint expressions.
A wave assignment to put constraint 
expressions into the wave.
/C parameter added to CurveFit command line to request a constrained fit.
